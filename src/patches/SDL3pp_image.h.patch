4d3
< #include <SDL3/SDL_image.h>
10a10,18
> #if !defined(SDL3PP_DISABLE_IMAGE) && !defined(SDL3PP_ENABLE_IMAGE) &&         \
>   __has_include(<SDL3_image/SDL_image.h>)
> #define SDL3PP_ENABLE_IMAGE
> #endif
> 
> #if defined(SDL3PP_ENABLE_IMAGE) || defined(SDL3PP_DOC)
> 
> #include <SDL3_image/SDL_image.h>
> 
14c22
<  * @defgroup CategorySDLImage Category SDLImage
---
>  * @defgroup CategorySDLImage Load images from several formats
98,99c106,115
< /// Printable format: "%d.%d.%d", MAJOR, MINOR, MICRO
< #define SDL_IMAGE_MAJOR_VERSION 3
---
> #ifdef SDL3PP_DOC
> 
> /**
>  * @name Image version
>  * @{
>  * Printable format: "%d.%d.%d", MAJOR, MINOR, MICRO
>  */
> #define SDL_IMAGE_MAJOR_VERSION
> 
> #define SDL_IMAGE_MINOR_VERSION
101c117
< #define SDL_IMAGE_MINOR_VERSION 2
---
> #define SDL_IMAGE_MICRO_VERSION
103c119
< #define SDL_IMAGE_MICRO_VERSION 5
---
> /// @}
105c121,123
< /// This is the version number macro for the current SDL_image version.
---
> /**
>  * This is the version number macro for the current SDL_image version.
>  */
116a135,136
> #endif // SDL3PP_DOC
> 
126c146
< inline int Version();
---
> inline int Version() { return IMG_Version(); }
130,131d149
< inline int IMG::Version() { return SDL::Version(); }
< 
173,175d190
<  * When done with the returned surface, the app should dispose of it with a call
<  * to Surface.Destroy().
<  *
177,178d191
<  * @param closeio true to close/free the IOStream before returning, false to
<  *                leave it open.
180a194,195
>  * @param closeio true to close/free the IOStream before returning, false
>  *                to leave it open.
193c208
<   return IMG_LoadTyped_IO(src, type, closeio);
---
>   return Surface(IMG_LoadTyped_IO(src, closeio, type));
222,224d236
<  * When done with the returned surface, the app should dispose of it with a call
<  * to [Surface.Destroy](https://wiki.libsdl.org/SDL3/Surface.Destroy) ().
<  *
234c246
< inline Surface LoadSurface(StringParam file) { return IMG_Load(file); }
---
> inline Surface LoadSurface(StringParam file) { return Surface(IMG_Load(file)); }
271,273d282
<  * When done with the returned surface, the app should dispose of it with a call
<  * to Surface.Destroy().
<  *
285c294
< inline Surface LoadSurface(IOStreamParam src, bool closeio)
---
> inline Surface LoadSurface(IOStreamParam src, bool closeio = false)
287c296
<   return IMG_Load_IO(src, closeio);
---
>   return Surface(IMG_Load_IO(src, closeio));
319,321d327
<  * When done with the returned texture, the app should dispose of it with a call
<  * to Texture.Destroy().
<  *
333c339
<   return IMG_LoadTexture(renderer, file);
---
>   return Texture(IMG_LoadTexture(renderer, file));
364,366d369
<  * When done with the returned texture, the app should dispose of it with a call
<  * to Texture.Destroy().
<  *
381c384
<                            bool closeio)
---
>                            bool closeio = false)
383c386
<   return IMG_LoadTexture_IO(renderer, src, closeio);
---
>   return Texture(IMG_LoadTexture_IO(renderer, src, closeio));
430,432d432
<  * When done with the returned texture, the app should dispose of it with a call
<  * to Texture.Destroy().
<  *
435,436d434
<  * @param closeio true to close/free the IOStream before returning, false to
<  *                leave it open.
438a437,438
>  * @param closeio true to close/free the IOStream before returning, false to
>  *                leave it open.
444d443
<  * @sa Texture.Texture
452c451
<   return IMG_LoadTextureTyped_IO(renderer, src, type, closeio);
---
>   return Texture(IMG_LoadTextureTyped_IO(renderer, src, closeio, type));
1244c1243,1246
< inline Surface LoadAVIF(IOStreamParam src) { return IMG_LoadAVIF_IO(src); }
---
> inline Surface LoadAVIF(IOStreamParam src)
> {
>   return Surface(IMG_LoadAVIF_IO(src));
> }
1278c1280,1283
< inline Surface LoadICO(IOStreamParam src) { return IMG_LoadICO_IO(src); }
---
> inline Surface LoadICO(IOStreamParam src)
> {
>   return Surface{IMG_LoadICO_IO(src)};
> }
1312c1317,1320
< inline Surface LoadCUR(IOStreamParam src) { return IMG_LoadCUR_IO(src); }
---
> inline Surface LoadCUR(IOStreamParam src)
> {
>   return Surface{IMG_LoadCUR_IO(src)};
> }
1346c1354,1357
< inline Surface LoadBMP(IOStreamParam src) { return IMG_LoadBMP_IO(src); }
---
> inline Surface LoadBMP(IOStreamParam src)
> {
>   return Surface{IMG_LoadBMP_IO(src)};
> }
1380c1391,1394
< inline Surface LoadGIF(IOStreamParam src) { return IMG_LoadGIF_IO(src); }
---
> inline Surface LoadGIF(IOStreamParam src)
> {
>   return Surface{IMG_LoadGIF_IO(src)};
> }
1414c1428,1431
< inline Surface LoadJPG(IOStreamParam src) { return IMG_LoadJPG_IO(src); }
---
> inline Surface LoadJPG(IOStreamParam src)
> {
>   return Surface{IMG_LoadJPG_IO(src)};
> }
1448c1465,1468
< inline Surface LoadJXL(IOStreamParam src) { return IMG_LoadJXL_IO(src); }
---
> inline Surface LoadJXL(IOStreamParam src)
> {
>   return Surface{IMG_LoadJXL_IO(src)};
> }
1482c1502,1505
< inline Surface LoadLBM(IOStreamParam src) { return IMG_LoadLBM_IO(src); }
---
> inline Surface LoadLBM(IOStreamParam src)
> {
>   return Surface{IMG_LoadLBM_IO(src)};
> }
1516c1539,1542
< inline Surface LoadPCX(IOStreamParam src) { return IMG_LoadPCX_IO(src); }
---
> inline Surface LoadPCX(IOStreamParam src)
> {
>   return Surface{IMG_LoadPCX_IO(src)};
> }
1550c1576,1579
< inline Surface LoadPNG(IOStreamParam src) { return IMG_LoadPNG_IO(src); }
---
> inline Surface LoadPNG(IOStreamParam src)
> {
>   return Surface{IMG_LoadPNG_IO(src)};
> }
1584c1613,1616
< inline Surface LoadPNM(IOStreamParam src) { return IMG_LoadPNM_IO(src); }
---
> inline Surface LoadPNM(IOStreamParam src)
> {
>   return Surface{IMG_LoadPNM_IO(src)};
> }
1618c1650,1653
< inline Surface LoadSVG(IOStreamParam src) { return IMG_LoadSVG_IO(src); }
---
> inline Surface LoadSVG(IOStreamParam src)
> {
>   return Surface{IMG_LoadSVG_IO(src)};
> }
1652c1687,1690
< inline Surface LoadQOI(IOStreamParam src) { return IMG_LoadQOI_IO(src); }
---
> inline Surface LoadQOI(IOStreamParam src)
> {
>   return Surface{IMG_LoadQOI_IO(src)};
> }
1686c1724,1727
< inline Surface LoadTGA(IOStreamParam src) { return IMG_LoadTGA_IO(src); }
---
> inline Surface LoadTGA(IOStreamParam src)
> {
>   return Surface{IMG_LoadTGA_IO(src)};
> }
1720c1761,1764
< inline Surface LoadTIF(IOStreamParam src) { return IMG_LoadTIF_IO(src); }
---
> inline Surface LoadTIF(IOStreamParam src)
> {
>   return Surface{IMG_LoadTIF_IO(src)};
> }
1754c1798,1801
< inline Surface LoadXCF(IOStreamParam src) { return IMG_LoadXCF_IO(src); }
---
> inline Surface LoadXCF(IOStreamParam src)
> {
>   return Surface{IMG_LoadXCF_IO(src)};
> }
1788c1835,1838
< inline Surface LoadXPM(IOStreamParam src) { return IMG_LoadXPM_IO(src); }
---
> inline Surface LoadXPM(IOStreamParam src)
> {
>   return Surface{IMG_LoadXPM_IO(src)};
> }
1822c1872
< inline Surface LoadXV(IOStreamParam src) { return IMG_LoadXV_IO(src); }
---
> inline Surface LoadXV(IOStreamParam src) { return Surface{IMG_LoadXV_IO(src)}; }
1856c1906,1909
< inline Surface LoadWEBP(IOStreamParam src) { return IMG_LoadWEBP_IO(src); }
---
> inline Surface LoadWEBP(IOStreamParam src)
> {
>   return Surface{IMG_LoadWEBP_IO(src)};
> }
1867,1869d1919
<  * When done with the returned surface, the app should dispose of it with a call
<  * to Surface.Destroy().
<  *
1871,1872c1921
<  * @param width desired width of the generated surface, in pixels.
<  * @param height desired height of the generated surface, in pixels.
---
>  * @param size desired width and height of the generated surface, in pixels.
1879c1928
<   return IMG_LoadSizedSVG_IO(src, size);
---
>   return Surface(IMG_LoadSizedSVG_IO(src, size.x, size.y));
1889,1891d1937
<  * When done with the returned surface, the app should dispose of it with a call
<  * to Surface.Destroy().
<  *
1901c1947
<   return IMG_ReadXPMFromArray(xpm);
---
>   return Surface{IMG_ReadXPMFromArray(xpm)};
1910,1912d1955
<  * When done with the returned surface, the app should dispose of it with a call
<  * to Surface.Destroy().
<  *
1922c1965
<   return IMG_ReadXPMFromArrayToRGB888(xpm);
---
>   return Surface{IMG_ReadXPMFromArrayToRGB888(xpm)};
1937,1938d1979
<  *
<  * @sa SaveAVIF
1955,1956d1995
<  * @param closeio true to close/free the IOStream before returning, false to
<  *                leave it open.
1958a1998,1999
>  * @param closeio true to close/free the IOStream before returning, false to
>  *                leave it open.
1962,1963d2002
<  *
<  * @sa SaveAVIF
1970c2009
<   CheckError(IMG_SaveAVIF_IO(surface, dst, quality, closeio));
---
>   CheckError(IMG_SaveAVIF_IO(surface, dst, closeio, quality));
2006,2007d2044
<  *
<  * @sa SavePNG
2028,2029d2064
<  *
<  * @sa SaveJPG
2046,2047d2080
<  * @param closeio true to close/free the IOStream before returning, false to
<  *                leave it open.
2049a2083,2084
>  * @param closeio true to close/free the IOStream before returning, false to
>  *                leave it open.
2053,2054d2087
<  *
<  * @sa SaveJPG
2061c2094
<   CheckError(IMG_SaveJPG_IO(surface, dst, quality, closeio));
---
>   CheckError(IMG_SaveJPG_IO(surface, dst, closeio, quality));
2141c2174
<   Animation(IOStreamParam src, bool closeio)
---
>   Animation(IOStreamParam src, bool closeio = false)
2193d2225
<    * @sa Animation.Animation
2197a2230
>   /// Get the width in pixels.
2199a2233
>   /// Get the height in pixels.
2201a2236
>   /// Get the size in pixels.
2203a2239
>   /// Return the number of frames.
2205a2242,2246
>   /**
>    * Return the frame image under given index.
>    *
>    * @param index the index to get frame, within [0, GetCount() - 1]
>    */
2207a2249,2253
>   /**
>    * Return the frame delay under given index.
>    *
>    * @param index the index to get frame, within [0, GetCount() - 1]
>    */
2248,2251c2294,2295
< inline int GetAnimationWidth(AnimationConstParam anim)
< {
<   static_assert(false, "Not implemented");
< }
---
> /// Get the width in pixels.
> inline int GetAnimationWidth(AnimationConstParam anim) { return anim->w; }
2258,2261c2302,2303
< inline int GetAnimationHeight(AnimationConstParam anim)
< {
<   static_assert(false, "Not implemented");
< }
---
> /// Get the height in pixels.
> inline int GetAnimationHeight(AnimationConstParam anim) { return anim->h; }
2267a2310
> /// Get the size in pixels.
2270c2313
<   static_assert(false, "Not implemented");
---
>   return {anim->w, anim->h};
2278,2281c2321,2322
< inline int GetAnimationCount(AnimationConstParam anim)
< {
<   static_assert(false, "Not implemented");
< }
---
> /// Return the number of frames.
> inline int GetAnimationCount(AnimationConstParam anim) { return anim->count; }
2287a2329,2334
> /**
>  * Return the frame image under given index.
>  *
>  * @param anim Animation to dispose of.
>  * @param index the index to get frame, within [0, GetCount() - 1]
>  */
2290c2337
<   static_assert(false, "Not implemented");
---
>   return Surface::Borrow(anim->frames[index]);
2297a2345,2350
> /**
>  * Return the frame delay under given index.
>  *
>  * @param anim Animation to dispose of.
>  * @param index the index to get frame, within [0, GetCount() - 1]
>  */
2300c2353
<   static_assert(false, "Not implemented");
---
>   return anim->delays[index];
2345c2398
< inline Animation LoadAnimation(IOStreamParam src, bool closeio)
---
> inline Animation LoadAnimation(IOStreamParam src, bool closeio = false)
2366a2420
>  * @param type a filename extension that represent this data ("GIF", etc).
2369d2422
<  * @param type a filename extension that represent this data ("GIF", etc).
2375d2427
<  * @sa Animation.Animation
2382c2434
<   return IMG_LoadAnimationTyped_IO(src, type, closeio);
---
>   return Animation(IMG_LoadAnimationTyped_IO(src, closeio, type));
2395d2446
<  * @sa Animation.Animation
2416d2466
<  * @sa Animation.Animation
2420c2470
< inline AnimationRef LoadGIFAnimation(IOStreamParam src)
---
> inline Animation LoadGIFAnimation(IOStreamParam src)
2422c2472
<   return IMG_LoadGIFAnimation_IO(src);
---
>   return Animation(IMG_LoadGIFAnimation_IO(src));
2439d2488
<  * @sa Animation.Animation
2443c2492
< inline AnimationRef LoadWEBPAnimation(IOStreamParam src)
---
> inline Animation LoadWEBPAnimation(IOStreamParam src)
2445c2494
<   return IMG_LoadWEBPAnimation_IO(src);
---
>   return Animation{IMG_LoadWEBPAnimation_IO(src)};
2450a2500,2501
> 
> #endif // defined(SDL3PP_ENABLE_IMAGE) || defined(SDL3PP_DOC)
