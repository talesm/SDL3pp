4d3
< #include <SDL3/SDL_image.h>
10a10,18
> #if !defined(SDL3PP_DISABLE_IMAGE) && !defined(SDL3PP_ENABLE_IMAGE) &&         \
>   __has_include(<SDL3_image/SDL_image.h>)
> #define SDL3PP_ENABLE_IMAGE
> #endif
> 
> #if defined(SDL3PP_ENABLE_IMAGE) || defined(SDL3PP_DOC)
> 
> #include <SDL3_image/SDL_image.h>
> 
14c22
<  * @defgroup CategorySDLImage Category SDLImage
---
>  * @defgroup CategorySDLImage Load images from several formats
98,99c106,113
< /// Printable format: "%d.%d.%d", MAJOR, MINOR, MICRO
< #define SDL_IMAGE_MAJOR_VERSION 3
---
> #ifdef SDL3PP_DOC
> 
> /**
>  * @name Image version
>  * @{
>  * Printable format: "%d.%d.%d", MAJOR, MINOR, MICRO
>  */
> #define SDL_IMAGE_MAJOR_VERSION
101c115
< #define SDL_IMAGE_MINOR_VERSION 2
---
> #define SDL_IMAGE_MINOR_VERSION
103c117
< #define SDL_IMAGE_MICRO_VERSION 5
---
> #define SDL_IMAGE_MICRO_VERSION
105c119,123
< /// This is the version number macro for the current SDL_image version.
---
> /// @}
> 
> /**
>  * This is the version number macro for the current SDL_image version.
>  */
116a135,136
> #endif // SDL3PP_DOC
> 
126c146
< inline int Version();
---
> inline int Version() { return IMG_Version(); }
130,131d149
< inline int IMG::Version() { return SDL::Version(); }
< 
176,178d193
<  * When done with the returned surface, the app should dispose of it with a
<  * call to Surface.Destroy().
<  *
180,181d194
<  * @param closeio true to close/free the IOStream before returning, false
<  *                to leave it open.
183a197,198
>  * @param closeio true to close/free the IOStream before returning, false
>  *                to leave it open.
196c211
<   return IMG_LoadTyped_IO(src, type, closeio);
---
>   return Surface(IMG_LoadTyped_IO(src, closeio, type));
228,232d242
<  * When done with the returned surface, the app should dispose of it with a
<  * call to
<  * [Surface.Destroy](https://wiki.libsdl.org/SDL3/Surface.Destroy)
<  * ().
<  *
242c252
< inline Surface LoadSurface(StringParam file) { return IMG_Load(file); }
---
> inline Surface LoadSurface(StringParam file) { return Surface(IMG_Load(file)); }
282,284d291
<  * When done with the returned surface, the app should dispose of it with a
<  * call to Surface.Destroy().
<  *
296c303
< inline Surface LoadSurface(IOStreamParam src, bool closeio)
---
> inline Surface LoadSurface(IOStreamParam src, bool closeio = false)
298c305
<   return IMG_Load_IO(src, closeio);
---
>   return Surface(IMG_Load_IO(src, closeio));
332,334d338
<  * When done with the returned texture, the app should dispose of it with a
<  * call to Texture.Destroy().
<  *
346c350
<   return IMG_LoadTexture(renderer, file);
---
>   return Texture(IMG_LoadTexture(renderer, file));
379,381d382
<  * When done with the returned texture, the app should dispose of it with a
<  * call to Texture.Destroy().
<  *
396c397
<                            bool closeio)
---
>                            bool closeio = false)
398c399
<   return IMG_LoadTexture_IO(renderer, src, closeio);
---
>   return Texture(IMG_LoadTexture_IO(renderer, src, closeio));
447,449d447
<  * When done with the returned texture, the app should dispose of it with a
<  * call to Texture.Destroy().
<  *
452,453d449
<  * @param closeio true to close/free the IOStream before returning, false
<  *                to leave it open.
455a452,453
>  * @param closeio true to close/free the IOStream before returning, false
>  *                to leave it open.
461d458
<  * @sa Texture.Texture
469c466
<   return IMG_LoadTextureTyped_IO(renderer, src, type, closeio);
---
>   return Texture(IMG_LoadTextureTyped_IO(renderer, src, closeio, type));
1279c1276,1279
< inline Surface LoadAVIF(IOStreamParam src) { return IMG_LoadAVIF_IO(src); }
---
> inline Surface LoadAVIF(IOStreamParam src)
> {
>   return Surface(IMG_LoadAVIF_IO(src));
> }
1313c1313,1316
< inline Surface LoadICO(IOStreamParam src) { return IMG_LoadICO_IO(src); }
---
> inline Surface LoadICO(IOStreamParam src)
> {
>   return Surface{IMG_LoadICO_IO(src)};
> }
1347c1350,1353
< inline Surface LoadCUR(IOStreamParam src) { return IMG_LoadCUR_IO(src); }
---
> inline Surface LoadCUR(IOStreamParam src)
> {
>   return Surface{IMG_LoadCUR_IO(src)};
> }
1381c1387,1390
< inline Surface LoadBMP(IOStreamParam src) { return IMG_LoadBMP_IO(src); }
---
> inline Surface LoadBMP(IOStreamParam src)
> {
>   return Surface{IMG_LoadBMP_IO(src)};
> }
1415c1424,1427
< inline Surface LoadGIF(IOStreamParam src) { return IMG_LoadGIF_IO(src); }
---
> inline Surface LoadGIF(IOStreamParam src)
> {
>   return Surface{IMG_LoadGIF_IO(src)};
> }
1449c1461,1464
< inline Surface LoadJPG(IOStreamParam src) { return IMG_LoadJPG_IO(src); }
---
> inline Surface LoadJPG(IOStreamParam src)
> {
>   return Surface{IMG_LoadJPG_IO(src)};
> }
1483c1498,1501
< inline Surface LoadJXL(IOStreamParam src) { return IMG_LoadJXL_IO(src); }
---
> inline Surface LoadJXL(IOStreamParam src)
> {
>   return Surface{IMG_LoadJXL_IO(src)};
> }
1517c1535,1538
< inline Surface LoadLBM(IOStreamParam src) { return IMG_LoadLBM_IO(src); }
---
> inline Surface LoadLBM(IOStreamParam src)
> {
>   return Surface{IMG_LoadLBM_IO(src)};
> }
1551c1572,1575
< inline Surface LoadPCX(IOStreamParam src) { return IMG_LoadPCX_IO(src); }
---
> inline Surface LoadPCX(IOStreamParam src)
> {
>   return Surface{IMG_LoadPCX_IO(src)};
> }
1585c1609,1612
< inline Surface LoadPNG(IOStreamParam src) { return IMG_LoadPNG_IO(src); }
---
> inline Surface LoadPNG(IOStreamParam src)
> {
>   return Surface{IMG_LoadPNG_IO(src)};
> }
1619c1646,1649
< inline Surface LoadPNM(IOStreamParam src) { return IMG_LoadPNM_IO(src); }
---
> inline Surface LoadPNM(IOStreamParam src)
> {
>   return Surface{IMG_LoadPNM_IO(src)};
> }
1653c1683,1686
< inline Surface LoadSVG(IOStreamParam src) { return IMG_LoadSVG_IO(src); }
---
> inline Surface LoadSVG(IOStreamParam src)
> {
>   return Surface{IMG_LoadSVG_IO(src)};
> }
1687c1720,1723
< inline Surface LoadQOI(IOStreamParam src) { return IMG_LoadQOI_IO(src); }
---
> inline Surface LoadQOI(IOStreamParam src)
> {
>   return Surface{IMG_LoadQOI_IO(src)};
> }
1721c1757,1760
< inline Surface LoadTGA(IOStreamParam src) { return IMG_LoadTGA_IO(src); }
---
> inline Surface LoadTGA(IOStreamParam src)
> {
>   return Surface{IMG_LoadTGA_IO(src)};
> }
1755c1794,1797
< inline Surface LoadTIF(IOStreamParam src) { return IMG_LoadTIF_IO(src); }
---
> inline Surface LoadTIF(IOStreamParam src)
> {
>   return Surface{IMG_LoadTIF_IO(src)};
> }
1789c1831,1834
< inline Surface LoadXCF(IOStreamParam src) { return IMG_LoadXCF_IO(src); }
---
> inline Surface LoadXCF(IOStreamParam src)
> {
>   return Surface{IMG_LoadXCF_IO(src)};
> }
1823c1868,1871
< inline Surface LoadXPM(IOStreamParam src) { return IMG_LoadXPM_IO(src); }
---
> inline Surface LoadXPM(IOStreamParam src)
> {
>   return Surface{IMG_LoadXPM_IO(src)};
> }
1857c1905
< inline Surface LoadXV(IOStreamParam src) { return IMG_LoadXV_IO(src); }
---
> inline Surface LoadXV(IOStreamParam src) { return Surface{IMG_LoadXV_IO(src)}; }
1891c1939,1942
< inline Surface LoadWEBP(IOStreamParam src) { return IMG_LoadWEBP_IO(src); }
---
> inline Surface LoadWEBP(IOStreamParam src)
> {
>   return Surface{IMG_LoadWEBP_IO(src)};
> }
1902,1904d1952
<  * When done with the returned surface, the app should dispose of it with a
<  * call to Surface.Destroy().
<  *
1906,1907c1954
<  * @param width desired width of the generated surface, in pixels.
<  * @param height desired height of the generated surface, in pixels.
---
>  * @param size desired width and height of the generated surface, in pixels.
1914c1961
<   return IMG_LoadSizedSVG_IO(src, size);
---
>   return Surface(IMG_LoadSizedSVG_IO(src, size.x, size.y));
1924,1926d1970
<  * When done with the returned surface, the app should dispose of it with a
<  * call to Surface.Destroy().
<  *
1936c1980
<   return IMG_ReadXPMFromArray(xpm);
---
>   return Surface{IMG_ReadXPMFromArray(xpm)};
1958c2002
<   return IMG_ReadXPMFromArrayToRGB888(xpm);
---
>   return Surface{IMG_ReadXPMFromArrayToRGB888(xpm)};
1973,1974d2016
<  *
<  * @sa SaveAVIF
1991,1992d2032
<  * @param closeio true to close/free the IOStream before returning, false
<  *                to leave it open.
1994a2035,2036
>  * @param closeio true to close/free the IOStream before returning, false
>  *                to leave it open.
1998,1999d2039
<  *
<  * @sa SaveAVIF
2006c2046
<   CheckError(IMG_SaveAVIF_IO(surface, dst, quality, closeio));
---
>   CheckError(IMG_SaveAVIF_IO(surface, dst, closeio, quality));
2042,2043d2081
<  *
<  * @sa SavePNG
2064,2065d2101
<  *
<  * @sa SaveJPG
2082,2083d2117
<  * @param closeio true to close/free the IOStream before returning, false
<  *                to leave it open.
2085a2120,2121
>  * @param closeio true to close/free the IOStream before returning, false
>  *                to leave it open.
2089,2090d2124
<  *
<  * @sa SaveJPG
2097c2131
<   CheckError(IMG_SaveJPG_IO(surface, dst, quality, closeio));
---
>   CheckError(IMG_SaveJPG_IO(surface, dst, closeio, quality));
2177c2211
<   Animation(IOStreamParam src, bool closeio)
---
>   Animation(IOStreamParam src, bool closeio = false)
2229d2262
<    * @sa Animation.Animation
2233a2267
>   /// Get the width in pixels.
2235a2270
>   /// Get the height in pixels.
2237a2273
>   /// Get the size in pixels.
2239a2276
>   /// Return the number of frames.
2241a2279,2283
>   /**
>    * Return the frame image under given index.
>    *
>    * @param index the index to get frame, within [0, GetCount() - 1]
>    */
2243a2286,2290
>   /**
>    * Return the frame delay under given index.
>    *
>    * @param index the index to get frame, within [0, GetCount() - 1]
>    */
2272,2275c2319,2320
< inline int GetAnimationWidth(AnimationConstParam anim)
< {
<   static_assert(false, "Not implemented");
< }
---
> /// Get the width in pixels.
> inline int GetAnimationWidth(AnimationConstParam anim) { return anim->w; }
2282,2285c2327,2328
< inline int GetAnimationHeight(AnimationConstParam anim)
< {
<   static_assert(false, "Not implemented");
< }
---
> /// Get the height in pixels.
> inline int GetAnimationHeight(AnimationConstParam anim) { return anim->h; }
2291a2335
> /// Get the size in pixels.
2294c2338
<   static_assert(false, "Not implemented");
---
>   return {anim->w, anim->h};
2302,2305c2346,2347
< inline int GetAnimationCount(AnimationConstParam anim)
< {
<   static_assert(false, "Not implemented");
< }
---
> /// Return the number of frames.
> inline int GetAnimationCount(AnimationConstParam anim) { return anim->count; }
2311a2354,2359
> /**
>  * Return the frame image under given index.
>  *
>  * @param anim Animation to dispose of.
>  * @param index the index to get frame, within [0, GetCount() - 1]
>  */
2314c2362
<   static_assert(false, "Not implemented");
---
>   return Surface::Borrow(anim->frames[index]);
2321a2370,2375
> /**
>  * Return the frame delay under given index.
>  *
>  * @param anim Animation to dispose of.
>  * @param index the index to get frame, within [0, GetCount() - 1]
>  */
2324c2378
<   static_assert(false, "Not implemented");
---
>   return anim->delays[index];
2369c2423
< inline Animation LoadAnimation(IOStreamParam src, bool closeio)
---
> inline Animation LoadAnimation(IOStreamParam src, bool closeio = false)
2390a2445
>  * @param type a filename extension that represent this data ("GIF", etc).
2393d2447
<  * @param type a filename extension that represent this data ("GIF", etc).
2399d2452
<  * @sa Animation.Animation
2406c2459
<   return IMG_LoadAnimationTyped_IO(src, type, closeio);
---
>   return Animation(IMG_LoadAnimationTyped_IO(src, closeio, type));
2419d2471
<  * @sa Animation.Animation
2440d2491
<  * @sa Animation.Animation
2444c2495
< inline AnimationRef LoadGIFAnimation(IOStreamParam src)
---
> inline Animation LoadGIFAnimation(IOStreamParam src)
2446c2497
<   return IMG_LoadGIFAnimation_IO(src);
---
>   return Animation(IMG_LoadGIFAnimation_IO(src));
2463d2513
<  * @sa Animation.Animation
2467c2517
< inline AnimationRef LoadWEBPAnimation(IOStreamParam src)
---
> inline Animation LoadWEBPAnimation(IOStreamParam src)
2469c2519
<   return IMG_LoadWEBPAnimation_IO(src);
---
>   return Animation{IMG_LoadWEBPAnimation_IO(src)};
2474a2525,2526
> 
> #endif // defined(SDL3PP_ENABLE_IMAGE) || defined(SDL3PP_DOC)
