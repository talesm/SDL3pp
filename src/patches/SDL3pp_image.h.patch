--- src/generated/SDL3pp_image.h
+++ include/SDL3pp/SDL3pp_image.h
@@ -1,17 +1,20 @@
 #ifndef SDL3PP_IMAGE_H_
 #define SDL3PP_IMAGE_H_
 
-#include <SDL3/SDL_image.h>
 #include "SDL3pp_error.h"
 #include "SDL3pp_render.h"
 #include "SDL3pp_surface.h"
 #include "SDL3pp_version.h"
 #include "SDL3pp_video.h"
 
+#if defined(SDL3PP_ENABLE_IMAGE) || defined(SDL3PP_DOC)
+
+#include <SDL3_image/SDL_image.h>
+
 namespace SDL {
 
 /**
- * @defgroup CategorySDLImage Category SDLImage
+ * @defgroup CategorySDLImage Load images from several formats
  *
  * Header file for SDL_image library
  *
@@ -95,6 +98,8 @@
   constexpr auto operator->() { return value; }
 };
 
+#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
+
 // Forward decl
 struct AnimationEncoder;
 
@@ -168,15 +173,26 @@
   /// Converts to underlying AnimationDecoderRaw
   constexpr operator AnimationDecoderRaw() const { return value; }
 };
+#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
+
+#ifdef SDL3PP_DOC
 
-/// Printable format: "%d.%d.%d", MAJOR, MINOR, MICRO
+/**
+ * @name Image version
+ * @{
+ * Printable format: "%d.%d.%d", MAJOR, MINOR, MICRO
+ */
 #define SDL_IMAGE_MAJOR_VERSION
 
 #define SDL_IMAGE_MINOR_VERSION
 
 #define SDL_IMAGE_MICRO_VERSION
 
-/// This is the version number macro for the current SDL_image version.
+/// @}
+
+/**
+ * This is the version number macro for the current SDL_image version.
+ */
 #define SDL_IMAGE_VERSION                                                      \
   SDL_VERSIONNUM(                                                              \
     SDL_IMAGE_MAJOR_VERSION, SDL_IMAGE_MINOR_VERSION, SDL_IMAGE_MICRO_VERSION)
@@ -188,6 +204,8 @@
    (SDL_IMAGE_MAJOR_VERSION > X || SDL_IMAGE_MINOR_VERSION > Y ||              \
     SDL_IMAGE_MICRO_VERSION >= Z))
 
+#endif // SDL3PP_DOC
+
 namespace IMG {
 
 /**
@@ -197,12 +215,10 @@
  *
  * @since This function is available since SDL_image 3.0.0.
  */
-inline int Version();
+inline int Version() { return IMG_Version(); }
 
 } // namespace IMG
 
-inline int IMG::Version() { return SDL::Version(); }
-
 /**
  * Load an image from a filesystem path into a software surface.
  *
@@ -227,10 +243,7 @@
  *
  * If you are using SDL's 2D rendering API, there is an equivalent call to load
  * images directly into an Texture for use by the GPU without using a software
- * surface: call Texture.Texture() instead.
- *
- * When done with the returned surface, the app should dispose of it with a call
- * to [Surface.Destroy](https://wiki.libsdl.org/SDL3/Surface.Destroy) ().
+ * surface: call LoadTexture() instead.
  *
  * @param file a path on the filesystem to load an image from.
  * @returns a new SDL surface, or nullptr on error.
@@ -240,7 +253,7 @@
  * @sa LoadSurfaceTyped
  * @sa Surface.Surface
  */
-inline Surface LoadSurface(StringParam file) { return IMG_Load(file); }
+inline Surface LoadSurface(StringParam file) { return Surface{IMG_Load(file)}; }
 
 /**
  * Load an image from an SDL data source into a software surface.
@@ -265,7 +278,7 @@
  * during this call in any case.
  *
  * There is a separate function to read files from disk without having to deal
- * with IOStream: `Surface.Surface("filename.jpg")` will call this function and
+ * with IOStream: `LoadSurface("filename.jpg")` will call this function and
  * manage those details for you, determining the file type from the filename's
  * extension.
  *
@@ -275,10 +288,7 @@
  *
  * If you are using SDL's 2D rendering API, there is an equivalent call to load
  * images directly into an Texture for use by the GPU without using a software
- * surface: call Texture.Texture() instead.
- *
- * When done with the returned surface, the app should dispose of it with a call
- * to Surface.Destroy().
+ * surface: call LoadSurface() instead.
  *
  * @param src an IOStream that data will be read from.
  * @param closeio true to close/free the IOStream before returning, false to
@@ -292,7 +302,7 @@
  */
 inline Surface LoadSurface(IOStreamParam src, bool closeio)
 {
-  return IMG_Load_IO(src, closeio);
+  return Surface{IMG_Load_IO(src, closeio)};
 }
 
 inline Surface::Surface(StringParam file)
@@ -334,11 +344,11 @@
  * ability to guess the format.
  *
  * There is a separate function to read files from disk without having to deal
- * with IOStream: `Surface.Surface("filename.jpg")` will call this function and
+ * with IOStream: `LoadSurface("filename.jpg")` will call this function and
  * manage those details for you, determining the file type from the filename's
  * extension.
  *
- * There is also Surface.Surface(), which is equivalent to this function except
+ * There is also LoadSurface(), which is equivalent to this function except
  * that it will rely on SDL_image to determine what type of data it is loading,
  * much like passing a nullptr for type.
  *
@@ -346,14 +356,11 @@
  * images directly into an Texture for use by the GPU without using a software
  * surface: call LoadTextureTyped() instead.
  *
- * When done with the returned surface, the app should dispose of it with a call
- * to Surface.Destroy().
- *
  * @param src an IOStream that data will be read from.
- * @param closeio true to close/free the IOStream before returning, false to
- *                leave it open.
  * @param type a filename extension that represent this data ("BMP", "GIF",
  *             "PNG", etc).
+ * @param closeio true to close/free the IOStream before returning, false
+ *                to leave it open.
  * @returns a new SDL surface, or nullptr on error.
  *
  * @since This function is available since SDL_image 3.0.0.
@@ -365,7 +372,7 @@
                                 StringParam type,
                                 bool closeio = false)
 {
-  return IMG_LoadTyped_IO(src, type, closeio);
+  return Surface(IMG_LoadTyped_IO(src, closeio, type));
 }
 
 /**
@@ -385,10 +392,7 @@
  * read; that function is Texture.Texture().
  *
  * If you would rather decode an image to an Surface (a buffer of pixels in CPU
- * memory), call Surface.Surface() instead.
- *
- * When done with the returned texture, the app should dispose of it with a call
- * to Texture.Destroy().
+ * memory), call LoadSurface() instead.
  *
  * @param renderer the Renderer to use to create the texture.
  * @param file a path on the filesystem to load an image from.
@@ -401,7 +405,7 @@
  */
 inline Texture LoadTexture(RendererParam renderer, StringParam file)
 {
-  return IMG_LoadTexture(renderer, file);
+  return Texture(IMG_LoadTexture(renderer, file));
 }
 
 /**
@@ -430,10 +434,7 @@
  * cannot autodetect the file format.
  *
  * If you would rather decode an image to an Surface (a buffer of pixels in CPU
- * memory), call Surface.Surface() instead.
- *
- * When done with the returned texture, the app should dispose of it with a call
- * to Texture.Destroy().
+ * memory), call LoadSurface() instead.
  *
  * @param renderer the Renderer to use to create the texture.
  * @param src an IOStream that data will be read from.
@@ -448,9 +449,9 @@
  */
 inline Texture LoadTexture(RendererParam renderer,
                            IOStreamParam src,
-                           bool closeio)
+                           bool closeio = false)
 {
-  return IMG_LoadTexture_IO(renderer, src, closeio);
+  return Texture(IMG_LoadTexture_IO(renderer, src, closeio));
 }
 
 inline Texture::Texture(RendererParam renderer, StringParam file)
@@ -497,28 +498,25 @@
  * If you would rather decode an image to an Surface (a buffer of pixels in CPU
  * memory), call LoadSurfaceTyped() instead.
  *
- * When done with the returned texture, the app should dispose of it with a call
- * to Texture.Destroy().
- *
  * @param renderer the Renderer to use to create the texture.
  * @param src an IOStream that data will be read from.
- * @param closeio true to close/free the IOStream before returning, false to
- *                leave it open.
  * @param type a filename extension that represent this data ("BMP", "GIF",
  *             "PNG", etc).
+ * @param closeio true to close/free the IOStream before returning, false to
+ *                leave it open.
  * @returns a new texture, or nullptr on error.
  *
  * @since This function is available since SDL_image 3.0.0.
  *
  * @sa Texture.Texture
- * @sa Texture.Texture
+ * @sa Texture.Destroy
  */
 inline Texture LoadTextureTyped(RendererParam renderer,
                                 IOStreamParam src,
                                 StringParam type,
                                 bool closeio = false)
 {
-  return IMG_LoadTextureTyped_IO(renderer, src, type, closeio);
+  return Texture(IMG_LoadTextureTyped_IO(renderer, src, closeio, type));
 }
 
 #if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
@@ -557,16 +555,12 @@
 inline GPUTexture LoadGPUTexture(GPUDeviceParam device,
                                  GPUCopyPass copy_pass,
                                  StringParam file,
-                                 int* width,
-                                 int* height)
+                                 int* width = nullptr,
+                                 int* height = nullptr)
 {
   return IMG_LoadGPUTexture(device, copy_pass, file, width, height);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Load an image from an SDL data source into a GPU texture.
  *
@@ -612,17 +606,13 @@
 inline GPUTexture LoadGPUTexture_IO(GPUDeviceParam device,
                                     GPUCopyPass copy_pass,
                                     IOStreamParam src,
-                                    bool closeio,
-                                    int* width,
-                                    int* height)
+                                    bool closeio = false,
+                                    int* width = nullptr,
+                                    int* height = nullptr)
 {
   return IMG_LoadGPUTexture_IO(device, copy_pass, src, closeio, width, height);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Load an image from an SDL data source into a GPU texture.
  *
@@ -658,10 +648,10 @@
  * @param copy_pass the GPUCopyPass to use to upload the loaded image to the GPU
  *                  texture.
  * @param src an IOStream that data will be read from.
- * @param closeio true to close/free the IOStream before returning, false to
- *                leave it open.
  * @param type a filename extension that represent this data ("BMP", "GIF",
  *             "PNG", etc).
+ * @param closeio true to close/free the IOStream before returning, false to
+ *                leave it open.
  * @param width a pointer filled in with the width of the GPU texture. may be
  *              nullptr.
  * @param height a pointer filled in with the width of the GPU texture. may be
@@ -676,19 +666,15 @@
 inline GPUTexture LoadGPUTextureTyped_IO(GPUDeviceParam device,
                                          GPUCopyPass copy_pass,
                                          IOStreamParam src,
-                                         bool closeio,
                                          StringParam type,
-                                         int* width,
-                                         int* height)
+                                         bool closeio = false,
+                                         int* width = nullptr,
+                                         int* height = nullptr)
 {
   return IMG_LoadGPUTextureTyped_IO(
     device, copy_pass, src, closeio, type, width, height);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Get the image currently in the clipboard.
  *
@@ -699,7 +685,7 @@
  *
  * @since This function is available since SDL_image 3.4.0.
  */
-inline Surface GetClipboardImage() { return IMG_GetClipboardImage(); }
+inline Surface GetClipboardImage() { return Surface{IMG_GetClipboardImage()}; }
 
 #endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
 
@@ -1552,7 +1538,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadAVIF(IOStreamParam src) { return IMG_LoadAVIF_IO(src); }
+inline Surface LoadAVIF(IOStreamParam src)
+{
+  return Surface(IMG_LoadAVIF_IO(src));
+}
 
 /**
  * Load a BMP image directly.
@@ -1586,7 +1575,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadBMP(IOStreamParam src) { return IMG_LoadBMP_IO(src); }
+inline Surface LoadBMP(IOStreamParam src)
+{
+  return Surface{IMG_LoadBMP_IO(src)};
+}
 
 /**
  * Load a CUR image directly.
@@ -1620,7 +1612,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadCUR(IOStreamParam src) { return IMG_LoadCUR_IO(src); }
+inline Surface LoadCUR(IOStreamParam src)
+{
+  return Surface{IMG_LoadCUR_IO(src)};
+}
 
 /**
  * Load a GIF image directly.
@@ -1654,7 +1649,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadGIF(IOStreamParam src) { return IMG_LoadGIF_IO(src); }
+inline Surface LoadGIF(IOStreamParam src)
+{
+  return Surface{IMG_LoadGIF_IO(src)};
+}
 
 /**
  * Load a ICO image directly.
@@ -1688,7 +1686,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadICO(IOStreamParam src) { return IMG_LoadICO_IO(src); }
+inline Surface LoadICO(IOStreamParam src)
+{
+  return Surface{IMG_LoadICO_IO(src)};
+}
 
 /**
  * Load a JPG image directly.
@@ -1722,7 +1723,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadJPG(IOStreamParam src) { return IMG_LoadJPG_IO(src); }
+inline Surface LoadJPG(IOStreamParam src)
+{
+  return Surface{IMG_LoadJPG_IO(src)};
+}
 
 /**
  * Load a JXL image directly.
@@ -1756,7 +1760,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadJXL(IOStreamParam src) { return IMG_LoadJXL_IO(src); }
+inline Surface LoadJXL(IOStreamParam src)
+{
+  return Surface{IMG_LoadJXL_IO(src)};
+}
 
 /**
  * Load a LBM image directly.
@@ -1790,7 +1797,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadLBM(IOStreamParam src) { return IMG_LoadLBM_IO(src); }
+inline Surface LoadLBM(IOStreamParam src)
+{
+  return Surface{IMG_LoadLBM_IO(src)};
+}
 
 /**
  * Load a PCX image directly.
@@ -1824,7 +1834,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadPCX(IOStreamParam src) { return IMG_LoadPCX_IO(src); }
+inline Surface LoadPCX(IOStreamParam src)
+{
+  return Surface{IMG_LoadPCX_IO(src)};
+}
 
 /**
  * Load a PNG image directly.
@@ -1858,7 +1871,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadPNG(IOStreamParam src) { return IMG_LoadPNG_IO(src); }
+inline Surface LoadPNG(IOStreamParam src)
+{
+  return Surface{IMG_LoadPNG_IO(src)};
+}
 
 /**
  * Load a PNM image directly.
@@ -1892,7 +1908,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadPNM(IOStreamParam src) { return IMG_LoadPNM_IO(src); }
+inline Surface LoadPNM(IOStreamParam src)
+{
+  return Surface{IMG_LoadPNM_IO(src)};
+}
 
 /**
  * Load a SVG image directly.
@@ -1927,7 +1946,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadSVG(IOStreamParam src) { return IMG_LoadSVG_IO(src); }
+inline Surface LoadSVG(IOStreamParam src)
+{
+  return Surface{IMG_LoadSVG_IO(src)};
+}
 
 /**
  * Load an SVG image, scaled to a specific size.
@@ -1942,8 +1964,7 @@
  * to Surface.Destroy().
  *
  * @param src an IOStream to load SVG data from.
- * @param width desired width of the generated surface, in pixels.
- * @param height desired height of the generated surface, in pixels.
+ * @param size desired width and height of the generated surface, in pixels.
  * @returns a new SDL surface, or nullptr on error.
  *
  * @since This function is available since SDL_image 3.0.0.
@@ -1952,7 +1973,7 @@
  */
 inline Surface LoadSizedSVG(IOStreamParam src, const PointRaw& size)
 {
-  return IMG_LoadSizedSVG_IO(src, size);
+  return Surface{IMG_LoadSizedSVG_IO(src, size.x, size.y)};
 }
 
 /**
@@ -1987,7 +2008,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadQOI(IOStreamParam src) { return IMG_LoadQOI_IO(src); }
+inline Surface LoadQOI(IOStreamParam src)
+{
+  return Surface{IMG_LoadQOI_IO(src)};
+}
 
 /**
  * Load a TGA image directly.
@@ -2021,7 +2045,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadTGA(IOStreamParam src) { return IMG_LoadTGA_IO(src); }
+inline Surface LoadTGA(IOStreamParam src)
+{
+  return Surface{IMG_LoadTGA_IO(src)};
+}
 
 /**
  * Load a TIFF image directly.
@@ -2055,7 +2082,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadTIF(IOStreamParam src) { return IMG_LoadTIF_IO(src); }
+inline Surface LoadTIF(IOStreamParam src)
+{
+  return Surface{IMG_LoadTIF_IO(src)};
+}
 
 /**
  * Load a WEBP image directly.
@@ -2089,7 +2119,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadWEBP(IOStreamParam src) { return IMG_LoadWEBP_IO(src); }
+inline Surface LoadWEBP(IOStreamParam src)
+{
+  return Surface{IMG_LoadWEBP_IO(src)};
+}
 
 /**
  * Load a XCF image directly.
@@ -2123,7 +2156,10 @@
  * @sa LoadXPM
  * @sa LoadXV
  */
-inline Surface LoadXCF(IOStreamParam src) { return IMG_LoadXCF_IO(src); }
+inline Surface LoadXCF(IOStreamParam src)
+{
+  return Surface{IMG_LoadXCF_IO(src)};
+}
 
 /**
  * Load a XPM image directly.
@@ -2157,7 +2193,10 @@
  * @sa LoadXCF
  * @sa LoadXV
  */
-inline Surface LoadXPM(IOStreamParam src) { return IMG_LoadXPM_IO(src); }
+inline Surface LoadXPM(IOStreamParam src)
+{
+  return Surface{IMG_LoadXPM_IO(src)};
+}
 
 /**
  * Load a XV image directly.
@@ -2191,7 +2230,7 @@
  * @sa LoadXCF
  * @sa LoadXPM
  */
-inline Surface LoadXV(IOStreamParam src) { return IMG_LoadXV_IO(src); }
+inline Surface LoadXV(IOStreamParam src) { return Surface{IMG_LoadXV_IO(src)}; }
 
 /**
  * Load an XPM image from a memory array.
@@ -2200,9 +2239,6 @@
  * it will be 32bpp. If you always want 32-bit data, use
  * ReadXPMFromArrayToRGB888() instead.
  *
- * When done with the returned surface, the app should dispose of it with a call
- * to Surface.Destroy().
- *
  * @param xpm a null-terminated array of strings that comprise XPM data.
  * @returns a new SDL surface, or nullptr on error.
  *
@@ -2212,7 +2248,7 @@
  */
 inline Surface ReadXPMFromArray(char** xpm)
 {
-  return IMG_ReadXPMFromArray(xpm);
+  return Surface{IMG_ReadXPMFromArray(xpm)};
 }
 
 /**
@@ -2221,9 +2257,6 @@
  * The returned surface will always be a 32-bit RGB surface. If you want 8-bit
  * indexed colors (and the XPM data allows it), use ReadXPMFromArray() instead.
  *
- * When done with the returned surface, the app should dispose of it with a call
- * to Surface.Destroy().
- *
  * @param xpm a null-terminated array of strings that comprise XPM data.
  * @returns a new SDL surface, or nullptr on error.
  *
@@ -2233,7 +2266,7 @@
  */
 inline Surface ReadXPMFromArrayToRGB888(char** xpm)
 {
-  return IMG_ReadXPMFromArrayToRGB888(xpm);
+  return Surface{IMG_ReadXPMFromArrayToRGB888(xpm)};
 }
 
 #if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
@@ -2267,10 +2300,6 @@
   CheckError(IMG_Save(surface, file));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an Surface into formatted image data, via an IOStream.
  *
@@ -2342,10 +2371,10 @@
  *
  * @param surface the SDL surface to save.
  * @param dst the IOStream to save the image data to.
- * @param closeio true to close/free the IOStream before returning, false to
- *                leave it open.
  * @param quality the desired quality, ranging between 0 (lowest) and 100
  *                (highest).
+ * @param closeio true to close/free the IOStream before returning, false to
+ *                leave it open.
  * @throws Error on failure.
  *
  * @since This function is available since SDL_image 3.0.0.
@@ -2357,7 +2386,7 @@
                      int quality,
                      bool closeio = false)
 {
-  CheckError(IMG_SaveAVIF_IO(surface, dst, quality, closeio));
+  CheckError(IMG_SaveAVIF_IO(surface, dst, closeio, quality));
 }
 
 #if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
@@ -2380,10 +2409,6 @@
   CheckError(IMG_SaveBMP(surface, file));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an Surface into BMP image data, via an IOStream.
  *
@@ -2402,15 +2427,13 @@
  *
  * @sa SaveBMP
  */
-inline void SaveBMP_IO(SurfaceParam surface, IOStreamParam dst, bool closeio)
+inline void SaveBMP_IO(SurfaceParam surface,
+                       IOStreamParam dst,
+                       bool closeio = false)
 {
   CheckError(IMG_SaveBMP_IO(surface, dst, closeio));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an Surface into a CUR image file.
  *
@@ -2429,10 +2452,6 @@
   CheckError(IMG_SaveCUR(surface, file));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an Surface into CUR image data, via an IOStream.
  *
@@ -2451,15 +2470,13 @@
  *
  * @sa SaveCUR
  */
-inline void SaveCUR_IO(SurfaceParam surface, IOStreamParam dst, bool closeio)
+inline void SaveCUR_IO(SurfaceParam surface,
+                       IOStreamParam dst,
+                       bool closeio = false)
 {
   CheckError(IMG_SaveCUR_IO(surface, dst, closeio));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an Surface into a GIF image file.
  *
@@ -2478,10 +2495,6 @@
   CheckError(IMG_SaveGIF(surface, file));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an Surface into GIF image data, via an IOStream.
  *
@@ -2500,15 +2513,13 @@
  *
  * @sa SaveGIF
  */
-inline void SaveGIF_IO(SurfaceParam surface, IOStreamParam dst, bool closeio)
+inline void SaveGIF_IO(SurfaceParam surface,
+                       IOStreamParam dst,
+                       bool closeio = false)
 {
   CheckError(IMG_SaveGIF_IO(surface, dst, closeio));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an Surface into a ICO image file.
  *
@@ -2527,10 +2538,6 @@
   CheckError(IMG_SaveICO(surface, file));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an Surface into ICO image data, via an IOStream.
  *
@@ -2549,7 +2556,9 @@
  *
  * @sa SaveICO
  */
-inline void SaveICO_IO(SurfaceParam surface, IOStreamParam dst, bool closeio)
+inline void SaveICO_IO(SurfaceParam surface,
+                       IOStreamParam dst,
+                       bool closeio = false)
 {
   CheckError(IMG_SaveICO_IO(surface, dst, closeio));
 }
@@ -2586,10 +2595,10 @@
  *
  * @param surface the SDL surface to save.
  * @param dst the IOStream to save the image data to.
- * @param closeio true to close/free the IOStream before returning, false to
- *                leave it open.
  * @param quality [0; 33] is Lowest quality, [34; 66] is Middle quality, [67;
  *                100] is Highest quality.
+ * @param closeio true to close/free the IOStream before returning, false to
+ *                leave it open.
  * @throws Error on failure.
  *
  * @since This function is available since SDL_image 3.0.0.
@@ -2601,7 +2610,7 @@
                     int quality,
                     bool closeio = false)
 {
-  CheckError(IMG_SaveJPG_IO(surface, dst, quality, closeio));
+  CheckError(IMG_SaveJPG_IO(surface, dst, closeio, quality));
 }
 
 /**
@@ -2667,10 +2676,6 @@
   CheckError(IMG_SaveTGA(surface, file));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an Surface into TGA image data, via an IOStream.
  *
@@ -2689,15 +2694,13 @@
  *
  * @sa SaveTGA
  */
-inline void SaveTGA_IO(SurfaceParam surface, IOStreamParam dst, bool closeio)
+inline void SaveTGA_IO(SurfaceParam surface,
+                       IOStreamParam dst,
+                       bool closeio = false)
 {
   CheckError(IMG_SaveTGA_IO(surface, dst, closeio));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an Surface into a WEBP image file.
  *
@@ -2720,10 +2723,6 @@
   CheckError(IMG_SaveWEBP(surface, file, quality));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an Surface into WEBP image data, via an IOStream.
  *
@@ -2734,12 +2733,12 @@
  *
  * @param surface the SDL surface to save.
  * @param dst the IOStream to save the image data to.
- * @param closeio true to close/free the IOStream before returning, false to
- *                leave it open.
  * @param quality between 0 and 100. For lossy, 0 gives the smallest size and
  *                100 the largest. For lossless, this parameter is the amount of
  *                effort put into the compression: 0 is the fastest but gives
  *                larger files compared to the slowest, but best, 100.
+ * @param closeio true to close/free the IOStream before returning, false to
+ *                leave it open.
  * @throws Error on failure.
  *
  * @since This function is available since SDL_image 3.4.0.
@@ -2748,8 +2747,8 @@
  */
 inline void SaveWEBP_IO(SurfaceParam surface,
                         IOStreamParam dst,
-                        bool closeio,
-                        float quality)
+                        float quality,
+                        bool closeio = false)
 {
   CheckError(IMG_SaveWEBP_IO(surface, dst, closeio, quality));
 }
@@ -2852,7 +2851,7 @@
    * @sa LoadWEBPAnimation
    * @sa Animation.Free
    */
-  Animation(IOStreamParam src, bool closeio)
+  Animation(IOStreamParam src, bool closeio = false)
     : m_resource(IMG_LoadAnimation_IO(src, closeio))
   {
   }
@@ -2919,16 +2918,30 @@
    */
   void Free();
 
+  /// Get the width in pixels.
   int GetWidth() const;
 
+  /// Get the height in pixels.
   int GetHeight() const;
 
+  /// Get the size in pixels.
   Point GetSize() const;
 
+  /// Return the number of frames.
   int GetCount() const;
 
+  /**
+   * Return the frame image under given index.
+   *
+   * @param index the index to get frame, within [0, GetCount() - 1]
+   */
   Surface GetFrame(int index) const;
 
+  /**
+   * Return the frame delay under given index.
+   *
+   * @param index the index to get frame, within [0, GetCount() - 1]
+   */
   int GetDelay(int index) const;
 
 #if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
@@ -2952,10 +2965,6 @@
    */
   void Save(StringParam file);
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
   /**
    * Save an animation to an IOStream.
    *
@@ -2968,9 +2977,9 @@
    * For formats that accept a quality, a default quality of 90 will be used.
    *
    * @param dst an IOStream that data will be written to.
+   * @param type a filename extension that represent this data ("GIF", etc).
    * @param closeio true to close/free the IOStream before returning, false to
    *                leave it open.
-   * @param type a filename extension that represent this data ("GIF", etc).
    * @throws Error on failure.
    *
    * @since This function is available since SDL_image 3.4.0.
@@ -2982,11 +2991,7 @@
    * @sa Animation.SaveGIF_IO
    * @sa Animation.SaveWEBP_IO
    */
-  void SaveTyped_IO(IOStreamParam dst, bool closeio, StringParam type);
-
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
+  void SaveTyped_IO(IOStreamParam dst, StringParam type, bool closeio = false);
 
   /**
    * Save an animation in ANI format to an IOStream.
@@ -3008,11 +3013,7 @@
    * @sa Animation.SaveGIF_IO
    * @sa Animation.SaveWEBP_IO
    */
-  void SaveANI_IO(IOStreamParam dst, bool closeio);
-
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
+  void SaveANI_IO(IOStreamParam dst, bool closeio = false);
 
   /**
    * Save an animation in APNG format to an IOStream.
@@ -3034,11 +3035,7 @@
    * @sa Animation.SaveGIF_IO
    * @sa Animation.SaveWEBP_IO
    */
-  void SaveAPNG_IO(IOStreamParam dst, bool closeio);
-
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
+  void SaveAPNG_IO(IOStreamParam dst, bool closeio = false);
 
   /**
    * Save an animation in AVIF format to an IOStream.
@@ -3047,10 +3044,10 @@
    * function succeeds or not.
    *
    * @param dst an IOStream from which data will be written to.
-   * @param closeio true to close/free the IOStream before returning, false to
-   *                leave it open.
    * @param quality the desired quality, ranging between 0 (lowest) and 100
    *                (highest).
+   * @param closeio true to close/free the IOStream before returning, false to
+   *                leave it open.
    * @throws Error on failure.
    *
    * @since This function is available since SDL_image 3.4.0.
@@ -3062,11 +3059,7 @@
    * @sa Animation.SaveGIF_IO
    * @sa Animation.SaveWEBP_IO
    */
-  void SaveAVIF_IO(IOStreamParam dst, bool closeio, int quality);
-
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
+  void SaveAVIF_IO(IOStreamParam dst, int quality, bool closeio = false);
 
   /**
    * Save an animation in GIF format to an IOStream.
@@ -3088,11 +3081,7 @@
    * @sa Animation.SaveAVIF_IO
    * @sa Animation.SaveWEBP_IO
    */
-  void SaveGIF_IO(IOStreamParam dst, bool closeio);
-
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
+  void SaveGIF_IO(IOStreamParam dst, bool closeio = false);
 
   /**
    * Save an animation in WEBP format to an IOStream.
@@ -3101,12 +3090,12 @@
    * function succeeds or not.
    *
    * @param dst an IOStream from which data will be written to.
-   * @param closeio true to close/free the IOStream before returning, false to
-   *                leave it open.
    * @param quality between 0 and 100. For lossy, 0 gives the smallest size and
    *                100 the largest. For lossless, this parameter is the amount
    *                of effort put into the compression: 0 is the fastest but
    *                gives larger files compared to the slowest, but best, 100.
+   * @param closeio true to close/free the IOStream before returning, false to
+   *                leave it open.
    * @throws Error on failure.
    *
    * @since This function is available since SDL_image 3.4.0.
@@ -3118,11 +3107,7 @@
    * @sa Animation.SaveAVIF_IO
    * @sa Animation.SaveGIF_IO
    */
-  void SaveWEBP_IO(IOStreamParam dst, bool closeio, int quality);
-
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
+  void SaveWEBP_IO(IOStreamParam dst, int quality, bool closeio = false);
 
   /**
    * Create an animated cursor from an animation.
@@ -3179,29 +3164,26 @@
   ~AnimationRef() { release(); }
 };
 
-inline int GetAnimationWidth(AnimationConstParam anim)
-{
-  static_assert(false, "Not implemented");
-}
+/// Get the width in pixels.
+inline int GetAnimationWidth(AnimationConstParam anim) { return anim->w; }
 
 inline int Animation::GetWidth() const
 {
   return SDL::GetAnimationWidth(m_resource);
 }
 
-inline int GetAnimationHeight(AnimationConstParam anim)
-{
-  static_assert(false, "Not implemented");
-}
+/// Get the height in pixels.
+inline int GetAnimationHeight(AnimationConstParam anim) { return anim->h; }
 
 inline int Animation::GetHeight() const
 {
   return SDL::GetAnimationHeight(m_resource);
 }
 
+/// Get the size in pixels.
 inline Point GetAnimationSize(AnimationConstParam anim)
 {
-  static_assert(false, "Not implemented");
+  return {anim->w, anim->h};
 }
 
 inline Point Animation::GetSize() const
@@ -3209,19 +3191,23 @@
   return SDL::GetAnimationSize(m_resource);
 }
 
-inline int GetAnimationCount(AnimationConstParam anim)
-{
-  static_assert(false, "Not implemented");
-}
+/// Return the number of frames.
+inline int GetAnimationCount(AnimationConstParam anim) { return anim->count; }
 
 inline int Animation::GetCount() const
 {
   return SDL::GetAnimationCount(m_resource);
 }
 
+/**
+ * Return the frame image under given index.
+ *
+ * @param anim Animation to dispose of.
+ * @param index the index to get frame, within [0, GetCount() - 1]
+ */
 inline Surface GetAnimationFrame(AnimationConstParam anim, int index)
 {
-  static_assert(false, "Not implemented");
+  return Surface::Borrow(anim->frames[index]);
 }
 
 inline Surface Animation::GetFrame(int index) const
@@ -3229,9 +3215,15 @@
   return SDL::GetAnimationFrame(m_resource, index);
 }
 
+/**
+ * Return the frame delay under given index.
+ *
+ * @param anim Animation to dispose of.
+ * @param index the index to get frame, within [0, GetCount() - 1]
+ */
 inline int GetAnimationDelay(AnimationConstParam anim, int index)
 {
-  static_assert(false, "Not implemented");
+  return anim->delays[index];
 }
 
 inline int Animation::GetDelay(int index) const
@@ -3292,7 +3284,7 @@
  * @sa LoadWEBPAnimation
  * @sa Animation.Free
  */
-inline Animation LoadAnimation(IOStreamParam src, bool closeio)
+inline Animation LoadAnimation(IOStreamParam src, bool closeio = false)
 {
   return Animation(src, closeio);
 }
@@ -3314,9 +3306,9 @@
  * call to Animation.Free().
  *
  * @param src an IOStream that data will be read from.
+ * @param type a filename extension that represent this data ("GIF", etc).
  * @param closeio true to close/free the IOStream before returning, false to
  *                leave it open.
- * @param type a filename extension that represent this data ("GIF", etc).
  * @returns a new Animation, or nullptr on error.
  *
  * @since This function is available since SDL_image 3.0.0.
@@ -3335,7 +3327,7 @@
                                     StringParam type,
                                     bool closeio = false)
 {
-  return IMG_LoadAnimationTyped_IO(src, type, closeio);
+  return Animation(IMG_LoadAnimationTyped_IO(src, closeio, type));
 }
 
 #if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
@@ -3366,15 +3358,11 @@
  * @sa LoadWEBPAnimation
  * @sa Animation.Free
  */
-inline AnimationRef LoadANIAnimation_IO(IOStreamParam src)
+inline Animation LoadANIAnimation_IO(IOStreamParam src)
 {
-  return IMG_LoadANIAnimation_IO(src);
+  return Animation(IMG_LoadANIAnimation_IO(src));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Load an APNG animation directly from an IOStream.
  *
@@ -3401,15 +3389,11 @@
  * @sa LoadWEBPAnimation
  * @sa Animation.Free
  */
-inline AnimationRef LoadAPNGAnimation_IO(IOStreamParam src)
+inline Animation LoadAPNGAnimation_IO(IOStreamParam src)
 {
-  return IMG_LoadAPNGAnimation_IO(src);
+  return Animation(IMG_LoadAPNGAnimation_IO(src));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Load an AVIF animation directly from an IOStream.
  *
@@ -3436,9 +3420,9 @@
  * @sa LoadWEBPAnimation
  * @sa Animation.Free
  */
-inline AnimationRef LoadAVIFAnimation_IO(IOStreamParam src)
+inline Animation LoadAVIFAnimation_IO(IOStreamParam src)
 {
-  return IMG_LoadAVIFAnimation_IO(src);
+  return Animation(IMG_LoadAVIFAnimation_IO(src));
 }
 
 #endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
@@ -3466,9 +3450,9 @@
  * @sa LoadWEBPAnimation
  * @sa Animation.Free
  */
-inline AnimationRef LoadGIFAnimation(IOStreamParam src)
+inline Animation LoadGIFAnimation(IOStreamParam src)
 {
-  return IMG_LoadGIFAnimation_IO(src);
+  return Animation(IMG_LoadGIFAnimation_IO(src));
 }
 
 /**
@@ -3494,9 +3478,9 @@
  * @sa LoadGIFAnimation
  * @sa Animation.Free
  */
-inline AnimationRef LoadWEBPAnimation(IOStreamParam src)
+inline Animation LoadWEBPAnimation(IOStreamParam src)
 {
-  return IMG_LoadWEBPAnimation_IO(src);
+  return Animation{IMG_LoadWEBPAnimation_IO(src)};
 }
 
 #if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
@@ -3524,19 +3508,11 @@
   CheckError(IMG_SaveAnimation(anim, file));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 inline void Animation::Save(StringParam file)
 {
   SDL::SaveAnimation(m_resource, std::move(file));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an animation to an IOStream.
  *
@@ -3565,27 +3541,19 @@
  */
 inline void SaveAnimationTyped_IO(AnimationParam anim,
                                   IOStreamParam dst,
-                                  bool closeio,
-                                  StringParam type)
+                                  StringParam type,
+                                  bool closeio = false)
 {
   CheckError(IMG_SaveAnimationTyped_IO(anim, dst, closeio, type));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 inline void Animation::SaveTyped_IO(IOStreamParam dst,
-                                    bool closeio,
-                                    StringParam type)
+                                    StringParam type,
+                                    bool closeio)
 {
-  SDL::SaveAnimationTyped_IO(m_resource, dst, closeio, std::move(type));
+  SDL::SaveAnimationTyped_IO(m_resource, dst, std::move(type), closeio);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an animation in ANI format to an IOStream.
  *
@@ -3609,24 +3577,16 @@
  */
 inline void SaveANIAnimation_IO(AnimationParam anim,
                                 IOStreamParam dst,
-                                bool closeio)
+                                bool closeio = false)
 {
   CheckError(IMG_SaveANIAnimation_IO(anim, dst, closeio));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 inline void Animation::SaveANI_IO(IOStreamParam dst, bool closeio)
 {
   SDL::SaveANIAnimation_IO(m_resource, dst, closeio);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an animation in APNG format to an IOStream.
  *
@@ -3650,24 +3610,16 @@
  */
 inline void SaveAPNGAnimation_IO(AnimationParam anim,
                                  IOStreamParam dst,
-                                 bool closeio)
+                                 bool closeio = false)
 {
   CheckError(IMG_SaveAPNGAnimation_IO(anim, dst, closeio));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 inline void Animation::SaveAPNG_IO(IOStreamParam dst, bool closeio)
 {
   SDL::SaveAPNGAnimation_IO(m_resource, dst, closeio);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an animation in AVIF format to an IOStream.
  *
@@ -3676,10 +3628,10 @@
  *
  * @param anim the animation to save.
  * @param dst an IOStream from which data will be written to.
- * @param closeio true to close/free the IOStream before returning, false to
- *                leave it open.
  * @param quality the desired quality, ranging between 0 (lowest) and 100
  *                (highest).
+ * @param closeio true to close/free the IOStream before returning, false to
+ *                leave it open.
  * @throws Error on failure.
  *
  * @since This function is available since SDL_image 3.4.0.
@@ -3693,25 +3645,17 @@
  */
 inline void SaveAVIFAnimation_IO(AnimationParam anim,
                                  IOStreamParam dst,
-                                 bool closeio,
-                                 int quality)
+                                 int quality,
+                                 bool closeio = false)
 {
   CheckError(IMG_SaveAVIFAnimation_IO(anim, dst, closeio, quality));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-inline void Animation::SaveAVIF_IO(IOStreamParam dst, bool closeio, int quality)
+inline void Animation::SaveAVIF_IO(IOStreamParam dst, int quality, bool closeio)
 {
-  SDL::SaveAVIFAnimation_IO(m_resource, dst, closeio, quality);
+  SDL::SaveAVIFAnimation_IO(m_resource, dst, quality, closeio);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an animation in GIF format to an IOStream.
  *
@@ -3735,24 +3679,16 @@
  */
 inline void SaveGIFAnimation_IO(AnimationParam anim,
                                 IOStreamParam dst,
-                                bool closeio)
+                                bool closeio = false)
 {
   CheckError(IMG_SaveGIFAnimation_IO(anim, dst, closeio));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 inline void Animation::SaveGIF_IO(IOStreamParam dst, bool closeio)
 {
   SDL::SaveGIFAnimation_IO(m_resource, dst, closeio);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Save an animation in WEBP format to an IOStream.
  *
@@ -3761,12 +3697,12 @@
  *
  * @param anim the animation to save.
  * @param dst an IOStream from which data will be written to.
- * @param closeio true to close/free the IOStream before returning, false to
- *                leave it open.
  * @param quality between 0 and 100. For lossy, 0 gives the smallest size and
  *                100 the largest. For lossless, this parameter is the amount of
  *                effort put into the compression: 0 is the fastest but gives
  *                larger files compared to the slowest, but best, 100.
+ * @param closeio true to close/free the IOStream before returning, false to
+ *                leave it open.
  * @throws Error on failure.
  *
  * @since This function is available since SDL_image 3.4.0.
@@ -3780,25 +3716,17 @@
  */
 inline void SaveWEBPAnimation_IO(AnimationParam anim,
                                  IOStreamParam dst,
-                                 bool closeio,
-                                 int quality)
+                                 int quality,
+                                 bool closeio = false)
 {
   CheckError(IMG_SaveWEBPAnimation_IO(anim, dst, closeio, quality));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-inline void Animation::SaveWEBP_IO(IOStreamParam dst, bool closeio, int quality)
+inline void Animation::SaveWEBP_IO(IOStreamParam dst, int quality, bool closeio)
 {
-  SDL::SaveWEBPAnimation_IO(m_resource, dst, closeio, quality);
+  SDL::SaveWEBPAnimation_IO(m_resource, dst, quality, closeio);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Create an animated cursor from an animation.
  *
@@ -3819,10 +3747,6 @@
   return CheckError(IMG_CreateAnimatedCursor(anim, hot_x, hot_y));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 inline CursorRef Animation::CreateAnimatedCursor(int hot_x, int hot_y)
 {
   return SDL::CreateAnimatedCursor(m_resource, hot_x, hot_y);
@@ -3840,18 +3764,14 @@
  * @since This function is available since SDL_image 3.0.0.
  *
  * @sa Animation.Animation
- * @sa Animation.Animation
  * @sa LoadAnimationTyped
- * @sa LoadANIAnimation_IO
- * @sa LoadAPNGAnimation_IO
- * @sa LoadAVIFAnimation_IO
- * @sa LoadGIFAnimation
- * @sa LoadWEBPAnimation
  */
 inline void FreeAnimation(AnimationRaw anim) { IMG_FreeAnimation(anim); }
 
 inline void Animation::Free() { FreeAnimation(release()); }
 
+#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
+
 /**
  * An object representing the encoder context.
  *
@@ -3896,8 +3816,6 @@
 
   constexpr AnimationEncoder(AnimationEncoderRef&& other) = delete;
 
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
   /**
    * Create an encoder to save a series of images to a file.
    *
@@ -3928,10 +3846,6 @@
   {
   }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
   /**
    * Create an encoder to save a series of images to an IOStream.
    *
@@ -3966,10 +3880,6 @@
   {
   }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
   /**
    * Create an animation encoder with the specified properties.
    *
@@ -4022,8 +3932,6 @@
   {
   }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
   /// Destructor
   ~AnimationEncoder() { IMG_CloseAnimationEncoder(m_resource); }
 
@@ -4064,16 +3972,13 @@
     return {m_resource};
   }
 
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
   /**
    * Close an animation encoder, finishing any encoding.
    *
    * Calling this function frees the animation encoder, and returns the final
    * status of the encoding process.
    *
-   * @returns true on success or false on failure; call GetError() for more
-   *          information.
+   * @throws Error on failure.
    *
    * @since This function is available since SDL_image 3.4.0.
    *
@@ -4081,11 +3986,7 @@
    * @sa AnimationEncoder.AnimationEncoder
    * @sa AnimationEncoder.AnimationEncoder
    */
-  bool Close();
-
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
+  void Close();
 
   /**
    * Add a frame to an animation encoder.
@@ -4105,8 +4006,6 @@
    * @sa AnimationEncoder.Close
    */
   void AddFrame(SurfaceParam surface, Uint64 duration);
-
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
 };
 
 /// Semi-safe reference for AnimationEncoder.
@@ -4146,8 +4045,6 @@
   ~AnimationEncoderRef() { release(); }
 };
 
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Create an encoder to save a series of images to a file.
  *
@@ -4178,10 +4075,6 @@
   return AnimationEncoder(std::move(file));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Create an encoder to save a series of images to an IOStream.
  *
@@ -4216,10 +4109,6 @@
   return AnimationEncoder(dst, closeio, std::move(type));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Create an animation encoder with the specified properties.
  *
@@ -4273,8 +4162,6 @@
   return AnimationEncoder(props);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 #define SDL_PROP_ANIMATION_ENCODER_CREATE_FILENAME_STRING                      \
   IMG_PROP_ANIMATION_ENCODER_CREATE_FILENAME_STRING
 
@@ -4305,8 +4192,6 @@
 #define SDL_PROP_ANIMATION_ENCODER_CREATE_GIF_USE_LUT_BOOLEAN                  \
   IMG_PROP_ANIMATION_ENCODER_CREATE_GIF_USE_LUT_BOOLEAN
 
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Add a frame to an animation encoder.
  *
@@ -4332,19 +4217,11 @@
   CheckError(IMG_AddAnimationEncoderFrame(encoder, surface, duration));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 inline void AnimationEncoder::AddFrame(SurfaceParam surface, Uint64 duration)
 {
   SDL::AddAnimationEncoderFrame(m_resource, surface, duration);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Close an animation encoder, finishing any encoding.
  *
@@ -4365,18 +4242,7 @@
   CheckError(IMG_CloseAnimationEncoder(encoder));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-inline bool AnimationEncoder::Close()
-{
-  return CloseAnimationEncoder(release());
-}
-
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
+inline void AnimationEncoder::Close() { CloseAnimationEncoder(release()); }
 
 /**
  * An enum representing the status of an animation decoder.
@@ -4385,8 +4251,6 @@
  */
 using AnimationDecoderStatus = IMG_AnimationDecoderStatus;
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 constexpr AnimationDecoderStatus DECODER_STATUS_INVALID =
   IMG_DECODER_STATUS_INVALID; ///< The decoder is invalid
 
@@ -4444,8 +4308,6 @@
 
   constexpr AnimationDecoder(AnimationDecoderRef&& other) = delete;
 
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
   /**
    * Create a decoder to read a series of images from a file.
    *
@@ -4477,10 +4339,6 @@
   {
   }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
   /**
    * Create a decoder to read a series of images from an IOStream.
    *
@@ -4516,10 +4374,6 @@
   {
   }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
   /**
    * Create an animation decoder with the specified properties.
    *
@@ -4563,8 +4417,6 @@
   {
   }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
   /// Destructor
   ~AnimationDecoder() { IMG_CloseAnimationDecoder(m_resource); }
 
@@ -4605,16 +4457,13 @@
     return {m_resource};
   }
 
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
   /**
    * Close an animation decoder, finishing any decoding.
    *
    * Calling this function frees the animation decoder, and returns the final
    * status of the decoding process.
    *
-   * @returns true on success or false on failure; call GetError() for more
-   *          information.
+   * @throws Error on failure.
    *
    * @since This function is available since SDL_image 3.4.0.
    *
@@ -4622,11 +4471,7 @@
    * @sa AnimationDecoder.AnimationDecoder
    * @sa AnimationDecoder.AnimationDecoder
    */
-  bool Close();
-
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
+  void Close();
 
   /**
    * Get the properties of an animation decoder.
@@ -4646,10 +4491,6 @@
    */
   PropertiesRef GetProperties();
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
   /**
    * Get the next frame in an animation decoder.
    *
@@ -4682,10 +4523,6 @@
    */
   void GetFrame(SDL_Surface** frame, Uint64* duration);
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
   /**
    * Get the decoder status indicating the current state of the decoder.
    *
@@ -4698,10 +4535,6 @@
    */
   AnimationDecoderStatus GetStatus();
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
   /**
    * Reset an animation decoder.
    *
@@ -4720,8 +4553,6 @@
    * @sa AnimationDecoder.Close
    */
   void Reset();
-
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
 };
 
 /// Semi-safe reference for AnimationDecoder.
@@ -4761,8 +4592,6 @@
   ~AnimationDecoderRef() { release(); }
 };
 
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Create a decoder to read a series of images from a file.
  *
@@ -4794,10 +4623,6 @@
   return AnimationDecoder(std::move(file));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Create a decoder to read a series of images from an IOStream.
  *
@@ -4833,10 +4658,6 @@
   return AnimationDecoder(src, closeio, std::move(type));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Create an animation decoder with the specified properties.
  *
@@ -4881,8 +4702,6 @@
   return AnimationDecoder(props);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 #define SDL_PROP_ANIMATION_DECODER_CREATE_FILENAME_STRING                      \
   IMG_PROP_ANIMATION_DECODER_CREATE_FILENAME_STRING
 
@@ -4916,8 +4735,6 @@
 #define SDL_PROP_ANIMATION_DECODER_CREATE_GIF_NUM_COLORS_NUMBER                \
   IMG_PROP_ANIMATION_DECODER_CREATE_GIF_NUM_COLORS_NUMBER
 
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Get the properties of an animation decoder.
  *
@@ -4941,17 +4758,11 @@
   return IMG_GetAnimationDecoderProperties(decoder);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 inline PropertiesRef AnimationDecoder::GetProperties()
 {
   return SDL::GetAnimationDecoderProperties(m_resource);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 #define SDL_PROP_METADATA_IGNORE_PROPS_BOOLEAN                                 \
   IMG_PROP_METADATA_IGNORE_PROPS_BOOLEAN
 
@@ -4972,8 +4783,6 @@
 
 #define SDL_PROP_METADATA_LOOP_COUNT_NUMBER IMG_PROP_METADATA_LOOP_COUNT_NUMBER
 
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Get the next frame in an animation decoder.
  *
@@ -5012,19 +4821,11 @@
   CheckError(IMG_GetAnimationDecoderFrame(decoder, frame, duration));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 inline void AnimationDecoder::GetFrame(SDL_Surface** frame, Uint64* duration)
 {
   SDL::GetAnimationDecoderFrame(m_resource, frame, duration);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Get the decoder status indicating the current state of the decoder.
  *
@@ -5042,19 +4843,11 @@
   return IMG_GetAnimationDecoderStatus(decoder);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 inline AnimationDecoderStatus AnimationDecoder::GetStatus()
 {
   return SDL::GetAnimationDecoderStatus(m_resource);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Reset an animation decoder.
  *
@@ -5078,19 +4871,11 @@
   CheckError(IMG_ResetAnimationDecoder(decoder));
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 inline void AnimationDecoder::Reset()
 {
   SDL::ResetAnimationDecoder(m_resource);
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
-
 /**
  * Close an animation decoder, finishing any decoding.
  *
@@ -5111,19 +4896,40 @@
   CheckError(IMG_CloseAnimationDecoder(decoder));
 }
 
+inline void AnimationDecoder::Close() { CloseAnimationDecoder(release()); }
+
 #endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
 
-#if SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
+/// @}
+
+} // namespace SDL
+
+#else // defined(SDL3PP_ENABLE_IMAGE) || defined(SDL3PP_DOC)
+
+namespace SDL {
 
-inline bool AnimationDecoder::Close()
+inline Surface::Surface(StringParam file)
+  : Surface(LoadBMP(std::move(file)))
 {
-  return CloseAnimationDecoder(release());
 }
 
-#endif // SDL_IMAGE_VERSION_ATLEAST(3, 4, 0)
+inline Surface::Surface(IOStreamParam src, bool closeio)
+  : Surface(LoadBMP(std::move(src), closeio))
+{
+}
 
-/// @}
+inline Texture::Texture(RendererParam renderer, StringParam file)
+  : Texture(std::move(renderer), Surface(std::move(file)))
+{
+}
+
+inline Texture::Texture(RendererParam renderer, IOStreamParam src, bool closeio)
+  : Texture(std::move(renderer), Surface(std::move(src), closeio))
+{
+}
 
 } // namespace SDL
 
+#endif // defined(SDL3PP_ENABLE_IMAGE) || defined(SDL3PP_DOC)
+
 #endif /* SDL3PP_IMAGE_H_ */
