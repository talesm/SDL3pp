17c17
<  * @defgroup CategoryJoystick Category Joystick
---
>  * @defgroup CategoryJoystick Joystick Support
299,300c299,300
<    * @returns a joystick identifier or nullptr on failure; call GetError() for
<    *          more information.
---
>    * @returns an Joystick on success.
>    * @throws Error on failure.
306c306
<   JoystickRef OpenJoystick();
---
>   Joystick OpenJoystick();
361a362,365
> /**
>  * Represents tbe HatState for a Joystick.
>  *
>  */
431,432c435
<    * @post a joystick identifier or nullptr on failure; call GetError() for
<    *          more information.
---
>    * @throws Error on failure.
439c442
<     : m_resource(SDL_OpenJoystick(instance_id))
---
>     : m_resource(CheckError(SDL_OpenJoystick(instance_id)))
572,575c575,576
<    * @param x the x coordinate of the finger on the touchpad, normalized 0 to 1,
<    *          with the origin in the upper left.
<    * @param y the y coordinate of the finger on the touchpad, normalized 0 to 1,
<    *          with the origin in the upper left.
---
>    * @param p the x, y coordinates of the finger on the touchpad, normalized 0
>    *          to 1, with the origin in the upper left.
1113,1116c1114
< inline void LockJoysticks(void) SDL_ACQUIRE(SDL_joystick_lock)
< {
<   SDL_LockJoysticks(SDL_ACQUIRE(SDL_joystick_lock);
< }
---
> inline void LockJoysticks(void) { SDL_LockJoysticks(); }
1123,1126c1121
< inline void UnlockJoysticks(void) SDL_RELEASE(SDL_joystick_lock)
< {
<   SDL_UnlockJoysticks(SDL_RELEASE(SDL_joystick_lock);
< }
---
> inline void UnlockJoysticks(void) { SDL_UnlockJoysticks(); }
1142,1143d1136
<  * @param count a pointer filled in with the number of joysticks returned, may
<  *              be nullptr.
1153c1146,1151
< inline OwnArray<JoystickID> GetJoysticks() { return SDL_GetJoysticks(); }
---
> inline OwnArray<JoystickID> GetJoysticks()
> {
>   int count;
>   auto r = reinterpret_cast<JoystickID*>(SDL_GetJoysticks(&count));
>   return OwnArray<JoystickID>(r, count);
> }
1357,1358c1355,1356
<  * @returns a joystick identifier or nullptr on failure; call GetError() for
<  *          more information.
---
>  * @returns an Joystick on success.
>  * @throws Error on failure.
1369,1372c1367
< inline JoystickRef JoystickID::OpenJoystick()
< {
<   return SDL::Joystick.Joystick(m_joystickID);
< }
---
> inline Joystick JoystickID::OpenJoystick() { return Joystick(m_joystickID); }
1385c1380
<   return CheckError(SDL_GetJoystickFromID(instance_id));
---
>   return {CheckError(SDL_GetJoystickFromID(instance_id))};
1407c1402
<   return CheckError(SDL_GetJoystickFromPlayerIndex(player_index));
---
>   return {CheckError(SDL_GetJoystickFromPlayerIndex(player_index))};
1628,1631c1623,1624
<  * @param x the x coordinate of the finger on the touchpad, normalized 0 to 1,
<  *          with the origin in the upper left.
<  * @param y the y coordinate of the finger on the touchpad, normalized 0 to 1,
<  *          with the origin in the upper left.
---
>  * @param p the x, y coordinates of the finger on the touchpad, normalized 0 to
>  *          1, with the origin in the upper left.
1645c1638
<     joystick, touchpad, finger, down, p, pressure));
---
>     joystick, touchpad, finger, down, p.x, p.y, pressure));
1720c1713
<   return CheckError(SDL_GetJoystickProperties(joystick));
---
>   return {CheckError(SDL_GetJoystickProperties(joystick))};
